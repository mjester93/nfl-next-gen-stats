{% extends 'nfl_next_gen_stats/base.html' %}
{% block content %}
    <div class="player-stats-header">
        <h1>{{ player.full_name }} NGS Stats</h1>
    </div>
    <div class="player-stats-main">
        <div class="player-stats-passing">
            <h2>Passing Stats</h2>
            <!-- TODO: TURN INTO FLEXBOX -->
            <table class="table table-sm">
                <thead class="text-center bg-info text-white">
                    <tr>
                        <th>Year</th>
                        <th>Pos</th>
                        <th>Team</th>
                        <th>Number</th>
                        <th title="Average Time To Throw">ATTT</th>
                        <th title="Average Completed Air Yards">ACAY</th>
                        <th title="Average Intended Air Yards">AIAY</th>
                        <th title="Average Air Yards Differential">AAYD</th>
                        <th title="Aggressiveness">AGG</th>
                        <th title="Average Air Distance">AAD</th>
                        <th title="Max Air Distance">MAD</th>
                        <th title="Max Completed Air Distance">MCAD</th>
                        <th title="Average Air Yards To Sticks">AAYTS</th>
                        <th title="Passer Rating">RAT</th>
                        <th title="Attempts">ATT</th>
                        <th title="Completions">COMP</th>
                        <th title="Completion Percentage">COMP%</td>
                        <th title="Expected Completion Percentage">xCOMP%</td>
                        <th title="Completion Percentage Above Expectation">+/-</th>
                        <th title="Passing Yards">Yards</th>
                        <th title="Interceptions">INT</th>
                        <th title="Passing Touchdowns">TD</th>
                    </tr>
                </thead>
                <tbody class="text-center">
                    {% for stat in passing_stats %}
                        {% if stat.week == 0%}
                            <tr>
                                <td>{{ stat.season }}</td>
                                <td>{{ stat.position }}</td>
                                <td>{{ stat.team }}</td>
                                <td>{{ stat.player_jersey_number }}</td>
                                <td>{{ stat.avg_time_to_throw|floatformat:2 }}</td>
                                <td>{{ stat.avg_completed_air_yards|floatformat:2 }}</td>
                                <td>{{ stat.avg_intended_air_yards|floatformat:2 }}</td>
                                <td>{{ stat.avg_air_yards_differential|floatformat:2 }}</td>
                                <td>{{ stat.aggressiveness|floatformat:2 }}</td>
                                <td>{{ stat.avg_air_distance|floatformat:2 }}</td>
                                <td>{{ stat.max_air_distance|floatformat:2 }}</td>
                                <td>{{ stat.max_completed_air_distance|floatformat:2 }}</td>
                                <td>{{ stat.avg_air_yards_to_sticks|floatformat:2 }}</td>
                                <td>{{ stat.passer_rating|floatformat:2 }}</td>
                                <td>{{ stat.attempts }}</td>
                                <td>{{ stat.completions }}</td>
                                <td>{{ stat.completion_percentage|floatformat:2 }}%</td>
                                <td>{{ stat.expected_completion_percentage|floatformat:2 }}%</td>
                                <td>{{ stat.completion_percentage_above_expectation|floatformat:2 }}%</td>
                                <td>{{ stat.pass_yards }}</td>
                                <td>{{ stat.interceptions }}</td>
                                <td>{{ stat.pass_touchdowns }}</td>
                            </tr>
                        {% endif %}
                    {% empty %}
                        <th>
                            <td colspan="22">There are no passing stats for {{ player.full_name }}</td>
                        </th>
                    {% endfor %}
                </tbody>
            </table>
        
            <p>Note: NGS webpage only shows players with a minumum passing attempts for that season. Please see the NGS website for more details.</p>
        </div>

        <div class="player-stats-rushing">
            <h2>Rushing Stats</h2>
            <!-- TODO: TURN INTO FLEXBOX -->
            <table class="table table-sm">
                <thead class="text-center bg-info text-white">
                    <tr>
                        <th>Year</th>
                        <th>Pos</th>
                        <th>Team</th>
                        <th>Number</th>
                        <th title="Efficiency">EFF</th>
                        <th title="8+ Defenders In The Box">8+D%</th>
                        <th title="Average Time Behind Line of Scrimmage">TLOS</th>
                        <th title="Rushing Attempts">ATT</th>
                        <th title="Rushing Yards">Yards</th>
                        <th title="Rushing Touchdowns">TD</th>
                        <th title="Expected Rushing Yards">xYards</th>
                        <th title="Rushing Yards Over Expected">RYOE</th>
                        <th title="Average Rushing Yards">AVG</th>
                        <th title="Rushing Yards Over Expected Per Attempt">RYOE/ATT</th>
                        <th title="Rushing Percentage Over Expected">RPOE</td>
                    </tr>
                </thead>
                <tbody class="text-center">
                    {% for stat in rushing_stats %}
                        {% if stat.week == 0%}
                            <tr>
                                <td>{{ stat.season }}</td>
                                <td>{{ stat.position }}</td>
                                <td>{{ stat.team }}</td>
                                <td>{{ stat.player_jersey_number }}</td>
                                <td>{{ stat.efficiency|floatformat:2 }}</td>
                                <td>{{ stat.percent_attempts_gte_eight_defenders|floatformat:2 }}%</td>
                                <td>{{ stat.avg_time_to_los|floatformat:2 }}</td>
                                <td>{{ stat.rush_attempts }}</td>
                                <td>{{ stat.rush_yards }}</td>
                                <td>{{ stat.rush_touchdowns }}</td>
                                <td>{{ stat.expected_rush_yards|floatformat:2 }}</td>
                                <td>{{ stat.rush_yards_over_expected|floatformat:2 }}</td>
                                <td>{{ stat.avg_rush_yards|floatformat:2 }}</td>
                                <td>{{ stat.rush_yards_over_expected_per_att|floatformat:2 }}</td>
                                <td>{% widthratio stat.rush_pct_over_expected 1 100 %}%</td>
                            </tr>
                        {% endif %}
                    {% empty %}
                        <th>
                            <td colspan="15">There are no rushing stats for {{ player.full_name }}</td>
                        </th>
                    {% endfor %}
                </tbody>
            </table>
        
            <p>Note: NGS webpage only shows players with a minumum rushing attempts for that season. Please see the NGS website for more details.</p>
        </div>

        <h2>Receiving Stats</h2>
    </div>
{% endblock content %}